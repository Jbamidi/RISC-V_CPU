# ‚öôÔ∏è Control Signal Table (Single-Cycle + Pipeline RV32I)

This table defines all **datapath control signals** generated by the **Control Unit** and used in both the **single-cycle** and **pipelined** CPU implementations.  
In the pipelined version, these control signals are also passed through the **ID/EX**, **EX/MEM**, and **MEM/WB** pipeline registers to control each stage.

---

## üß† Control Signal Descriptions

| Signal | Width | Purpose | Meaning |
|--------|--------|----------|----------|
| **`RegWrite`** | 1 bit | Enables writeback to register file | `1` = Write to `rd` in WB stage<br>`0` = No register write |
| **`ALU_Src`** | 1 bit | Selects second ALU operand | `0` = Use `rs2`<br>`1` = Use immediate (`imm_ex`) |
| **`MemRead`** | 1 bit | Enables data memory read | `1` = Read from DMEM (LW)<br>`0` = No memory read |
| **`MemWrite`** | 1 bit | Enables data memory write | `1` = Write to DMEM (SW)<br>`0` = No memory write |
| **`MemToReg`** | 1 bit | Selects WB data source | `0` = Write ALU result<br>`1` = Write DMEM read data |
| **`Branch`** | 1 bit | Marks instruction as a conditional branch | `1` = Branch instruction (BEQ/BNE/BLT/etc.)<br>`0` = Not a branch |
| **`ALU_Op`** | 2 bits | Encodes ALU behavior category fed to ALU_Control | `00` = Load/Store (ADD)<br>`01` = Branch (SUB/compare)<br>`10` = R-Type (funct-based)<br>`11` = I-Type (funct-based) |

---

## üß© How These Signals Behave in the Pipelined CPU

### üîπ IF Stage  
Control signals are not generated yet.

### üîπ ID Stage  
The **Control Unit** decodes the instruction and generates:  
`RegWrite`, `ALU_Src`, `MemRead`, `MemWrite`, `MemToReg`, `Branch`, `ALU_Op`

These signals are stored into the **ID/EX pipeline registers**.

---

## üîß Control Flow Through Pipeline Stages

### **ID/EX Stage**
- Control signals determine ALU selection and branching.
- Hazard detection may convert these into a **bubble** (set them to zero).

### **EX/MEM Stage**
- `MemRead`, `MemWrite`, and `MemToReg` move forward.
- ALU result is forwarded here.

### **MEM/WB Stage**
- `MemToReg` and `RegWrite` decide final writeback routing.

---

## üß† Updated Datapath Behavior

1. **`ALU_Src`**  
   Selects between register operand (`rd2_ex`) or immediate (`imm_ex`).

2. **`ALU_Op`**  
   Classifies the operation so `ALU_Control` generates ALU_Sel.

3. **`MemRead` / `MemWrite`**  
   Active only in MEM stage; used by DMEM.

4. **`Branch`**  
   Feeds into branch comparator ‚Üí branch_taken ‚Üí flush IF/ID & ID/EX.

5. **`MemToReg`**  
   Determines if register file receives:
   - ALU result (R/I-type)
   - Load data (LW)
   - PC+4 (JAL/JALR)

6. **`RegWrite`**  
   Enables writeback during WB stage.

---

## ‚úÖ Updated Summary
These seven control signals are sufficient to implement **all RV32I instructions** in both the single-cycle and pipelined CPU:

- Arithmetic/logic  
- Immediate operations  
- Memory load/store  
- Conditional branches  
- Jumps (JAL/JALR)  
- Upper-immediate instructions (LUI/AUIPC)

The pipelined design additionally transports these signals through pipeline registers and uses hazard detection + forwarding logic to maintain correctness.
